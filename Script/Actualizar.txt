
ALTER PROC [dbo].[USP_TB_USUARIO_SEL]
(
	@USU_EMAIL	VARCHAR(255),
	@USU_PASS	VARCHAR(255)
)
AS
BEGIN
	SELECT USU_COD,
	       USU_NOM,
	       USU_PASS,
	       USU_EMAIL,
	       USU_CEL 
	FROM TB_USUARIO 
	WHERE RTRIM(LTRIM(USU_NOM))=RTRIM(LTRIM(@USU_EMAIL))
	AND RTRIM(LTRIM(USU_PASS))=RTRIM(LTRIM(@USU_PASS))
END

GO


ALTER PROC [dbo].[USP_TB_USUARIO_INS]
(
	@USU_NOM	VARCHAR(255),
	@USU_PASS	VARCHAR(255),
	@USU_EMAIL	VARCHAR(255),  
	@USU_CEL	VARCHAR(255)
)
AS
BEGIN

	IF NOT EXISTS(SELECT 1 FROM TB_USUARIO WHERE USU_NOM=@USU_NOM)
	BEGIN
		INSERT INTO TB_USUARIO (USU_NOM,USU_PASS,USU_EMAIL,USU_CEL)
		VALUES(@USU_NOM,@USU_PASS,@USU_EMAIL,@USU_CEL)
		SELECT CAST(SCOPE_IDENTITY() AS BIGINT)
	END
	ELSE
	BEGIN
		SELECT 0
	END
END

GO

ALTER PROC [dbo].[USP_TB_PEDIDO_SEGUIMIENTO_INS]
(
	@PSE_PED_COD BIGINT,
	@PSE_COR_LAT VARCHAR(255),
	@PSE_COR_LON VARCHAR(255)
)
AS
BEGIN
	INSERT INTO TB_PEDIDO_SEGUIMIENTO(PSE_PED_COD,PSE_FEC,PSE_COR_LAT,PSE_COR_LON)
	VALUES(@PSE_PED_COD,GETDATE(),@PSE_COR_LAT,@PSE_COR_LON)	
	SELECT CAST(SCOPE_IDENTITY() AS BIGINT)
END

GO

ALTER PROC [dbo].[USP_TB_ARTICULO_INS]
(
	@ART_NOM	VARCHAR(255),
	@ART_DES	VARCHAR(255),
	@ART_PRE	DECIMAL(18,2)
)
AS
BEGIN

	IF NOT EXISTS(SELECT 1 FROM TB_ARTICULO WHERE ART_NOM=@ART_NOM)
	BEGIN
		INSERT INTO TB_ARTICULO (ART_NOM,ART_DES,ART_PRE)
		VALUES(@ART_NOM,@ART_DES,@ART_PRE)
		SELECT CAST(SCOPE_IDENTITY() AS BIGINT)
	END
	ELSE
	BEGIN
		SELECT 0
	END
END

GO
